% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Seurat.Utils.R
\name{calc.cluster.averages}
\alias{calc.cluster.averages}
\title{calc.cluster.averages}
\usage{
calc.cluster.averages(
  col_name = "Score.GO.0006096",
  plot.UMAP.too = TRUE,
  return.plot = F,
  obj = combined.obj,
  split_by = GetNamedClusteringRuns()[1],
  scale.zscore = FALSE,
  simplify = T,
  plotit = T,
  histogram = FALSE,
  nbins = 50,
  suffix = NULL,
  stat = c("mean", "median")[2],
  quantile.thr = 0.9,
  absolute.thr = FALSE,
  filter = c(FALSE, "above", "below")[1],
  ylab.text = paste("Cluster", stat, "score"),
  title = paste("Cluster", stat, col_name),
  prefix.cl.names = FALSE,
  report = TRUE,
  subtitle = NULL,
  width = 8,
  height = 6,
  xlb = if (absolute.thr) paste("Threshold at", absolute.thr) else paste("Black lines: ",
    kppd(Stringendo::percentage_formatter(c(1 - quantile.thr, quantile.thr))),
    "quantiles |", "Cl. >", Stringendo::percentage_formatter(quantile.thr),
    "are highlighted. |", split_by),
  fname = ppp(col_name, split_by, "cluster.average.barplot.pdf", ...),
  ...
)
}
\arguments{
\item{col_name}{The name of the column for which the average is calculated. Default: 'Score.GO.0006096'.}

\item{plot.UMAP.too}{Whether to plot a UMAP as well. Default: TRUE.}

\item{return.plot}{Whether to return the plot. Default: FALSE.}

\item{obj}{The main Seurat object used for calculations. Default: combined.obj.}

\item{split_by}{Cluster to split by. Default: First entry of GetNamedClusteringRuns().}

\item{scale.zscore}{Whether to scale z-scores. Default: FALSE.}

\item{simplify}{Whether to simplify the result. Default: TRUE.}

\item{plotit}{Whether to plot the results. Default: TRUE.}

\item{histogram}{Whether to produce a histogram. Default: FALSE.}

\item{nbins}{The number of bins for the histogram. Default: 50.}

\item{suffix}{Suffix added to the filename. Default: NULL.}

\item{stat}{Statistical method applied, "mean" or "median". Default: "median".}

\item{quantile.thr}{The threshold for quantiles. Default: 0.9.}

\item{absolute.thr}{Absolute threshold used in computations. Default: FALSE.}

\item{filter}{The filter mode: 'above', 'below', or FALSE. Default: FALSE.}

\item{ylab.text}{Text for the y-axis label. Default: "Cluster" followed by the statistical method and "score".}

\item{title}{Title for the plot. Default: "Cluster" followed by the statistical method and column name.}

\item{subtitle}{The subtitle for the plot. Default: NULL.}

\item{width}{The width of the plot. Default: 8.}

\item{height}{The height of the plot. Default: 6.}

\item{xlb}{The label for the x-axis. Default depends on the 'absolute.thr' parameter.}

\item{fname}{The filename for the plot. Default is based on column name and split_by value.}

\item{...}{Additional parameters passed to the internally called functions.}
}
\description{
Calculates the average of a metadata column (numeric) per cluster.
}
